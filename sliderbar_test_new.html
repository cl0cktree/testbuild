<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no, address=no, email=no">
    <title>슬라이더 모듈 샘플</title>
    <style>
        html,body{width:100%;height:100%;margin:0;padding:0;font-size:10px;}
        .a-center{text-align:center!important;}
        .click-transition{transition:all 0.3s;}
        .wrap-all{padding-top:2rem;}
        .wrap-all .wrapper_slider{font-size:1rem;margin-top:2rem;margin-bottom:9rem;}
        .wrap-all .wrapper_slider .slider_cal{display:block;max-width:500px;margin:0 auto;font-size:1.2rem;text-align:center;}
        .wrap-all .wrapper_slider>div{width:88%;max-width:500px;font-size:1.6rem;}
        .wrap-all .wrapper_slider .vanila_slider_bar{display:block;position:relative;height:20px;border:2px solid #fff;outline:1px solid #666;margin:8px auto 0;background:yellowgreen;border-radius:50px;}
        .wrap-all .wrapper_slider .vanila_slider_over{display:block;position:relative;width:0%;max-width:500px;height:20px;background:rgb(74, 213, 231);border-radius:50px;}
        .wrap-all .wrapper_slider .vanila_slider_bar .vanila_slider_button{display:block;position:absolute;width:34px;height:34px;background:#009688;border:2px solid #fff;outline:1px solid #666;border-radius:50%;left:0;top:-7px;opacity:1;cursor:pointer;}
        .wrap-all .wrapper_slider .vanila_slider_bar .vanila_slider_status{display:block;position:absolute;min-width:30px;min-height:30px;background:transparent;left:0px;top:0;margin-top:40px;text-align:center;color:#000;}
    
        .wrap-all .wrapper_slider>div:nth-of-type(2){position:relative;margin:4px auto 0;}
        .wrap-all .wrapper_slider>div:nth-of-type(2)>span{position:absolute;font-size:1.4rem;color:#666;}
        .wrap-all .wrapper_slider>div:nth-of-type(2) .slider_min{left:-20px;}
        .wrap-all .wrapper_slider>div:nth-of-type(2) .slider_max{right:-20px;}
    </style>
    <script defer>
        document.addEventListener("DOMContentLoaded", function(){// script 순서 상관 없이 실행.
            //---wrapper_slider 갯수 자동 인식 및 그에 맞는 class 적용.---
            var wrapper_slider_all=document.querySelectorAll('.wrapper_slider');
            var slider_leng=wrapper_slider_all.length;
            console.log(slider_leng);
            for(i=1;i<=slider_leng;i++){
                console.log('roof = '+i);
                wrapper_slider_all[i-1].classList.add('wrapper_slider_'+i);
                Slider_maker();
            };
            //----------------------------------------------------------
            function Slider_maker(){ //복제 가능한 함수를 만들기 위한 생성자 함수.
                //-----초기세팅 및 선택자 지정----------------------------
                var wrapper_slider=document.querySelector('.wrapper_slider_'+i); // -- 각 .wrapper_slider 선택 및 넘버링.
                // console.log('i = '+wrapper_slider);
                var vanila_slider_bar=document.querySelector('.wrapper_slider_'+i+' .vanila_slider_bar'); // -- 슬라이더바 아이디 지정 및 선택.
                var wrapper_slider_create=document.createElement('div'); // -- .slider_min, .slider_max 를 감싸는 div.
                vanila_slider_bar.innerHTML+='<span class="vanila_slider_over"></span><button class="vanila_slider_button"></button><span class="vanila_slider_status"></span>';
                var slider_bar_width=vanila_slider_bar.clientWidth; // -- 각 .vanila_slider_bar 넓이값.
                var vanila_slider_over=document.querySelector('.wrapper_slider_'+i+' .vanila_slider_over');
                var slider_bar_button=document.querySelector('.wrapper_slider_'+i+' .vanila_slider_button');
                var vanila_slider_status=document.querySelector('.wrapper_slider_'+i+' .vanila_slider_status');
                var slider_data_cal=vanila_slider_bar.getAttribute('data-cal'); // -- 값의 최소 기준 단위.
                var slider_data_max=vanila_slider_bar.getAttribute('data-max'); // -- 슬라이더의 최대값.
                var slider_data_min=vanila_slider_bar.getAttribute('data-min'); // -- 슬라리더의 최소값.
                var data_cal_cut = (slider_data_cal/slider_data_max)*100; // -- 기준 단위를 슬라이더의 최대값으로 나눈 값으로 슬라이더의 최소 단위. 퍼센트 최소 소수점 및 단위 비교의 척도.
                var bar_per_min;
                var default_width; // -- 최초의 슬라이더 넓이값.
                var old_width; // -- 이전의 슬라이더 넓이값.
                var new_width; // -- 현재의 슬라이더 넓이값.
                var old_point; // -- 이전의 슬라이더 버튼의 위치값.
                var new_point; // -- 현재의 슬라이더 버튼의 위치값.
                var input_point; // -- 반응형에서 일어난 이벤트로 변경 된 수치를 resize쪽에 공유 하기 위한 변수.
                var reisze_check; // -- resize 여부 체크용 변수.
                var trans_val; // -- resize와 각 이밴트에서 발생하는 new_point 값을 공유하여 넣을 변수.
                var trans_val_button; // -- slider_bar_button의 현재 값을 갖는 변수.
                var trans_val_status; // -- vanila_slider_status의 현재 값을 갖는 변수.
                var trans_val_over; // -- vanila_slider_over의 현재 값을 갖는 변수.
                var re_val_button; // -- slider_bar_button의 resize 값을 갖는 변수.
                var re_val_status; // -- vanila_slider_status의 resize 값을 갖는 변수.
                var re_val_over; // -- vanila_slider_over의 resize 값을 갖는 변수.
                var trans_per; // -- 이전 넓이와 현재 넓이의 비율을 담는 변수.
                var per_value; // -- resize 시와 이벤트 입력 시의 버튼 위치의 비율 공유를 위한 변수.
                var frame_start;
                var slide_icon_pageX; // -- .vanila_slider_button 위치값.
                var mousedown_start; // -- 마우스 이밴트 시작 시점 변수.
                var slider_bar_start; // -- 슬라이더 버튼 시작 위치 변수.
                var slide_touch_move;
                var animate_box; // -- 슬라이더 부분 이밴트 발생 시 강제 실행 및 시간차 타이밍 설정.
                var stop_animate_box;
                var mouse_down_start;
                var slider_data_unit;
                var slider_data_ratio;
                var slider_icon_point;
                var slider_icon_move;
                var slider_data_reset;
                var slider_bar_per=100*slider_icon_point/slider_bar_width; // -- 현재 버튼의 위치에 비례하여 출력 되는 증감되는 비용 계산에 사용 됨. resize 시 비율 계산과 값이 교체 되므로 중요함.
                var slider_status_width=Number(vanila_slider_status.clientWidth/2);
                var slider_bar_halfButton=Number(slider_bar_button.offsetWidth/2);
                var slider_data_default=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_bar_halfButton;
                var slider_data_default_status=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_status_width;
                var slider_pointer_per=(slider_data_default+slider_bar_halfButton)/slider_bar_width;
                var slider_point_split = String(slider_pointer_per).split('.')[1]; // -- 퍼센트 출력부의 소수점 부분 추출.
                var point_split_zero;
                var split_zero_cal;
                var cal_pattern;
                var return_cal;
                var slider_data_per=((slider_data_max)*slider_pointer_per);
                var minus_data_cal=(slider_data_cal.length-1)*-1;
                var max_min_ratio=Math.round(slider_data_max/slider_data_cal);
                var sep_max_min=slider_data_max.slice(minus_data_cal,slider_data_max.length);
                var round_data_min=(sep_max_min)/slider_data_cal;
                var pattern_sep=slider_data_per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
                var percent_price;
                var clone_sep;
                // var slider_bar_button_before=document.documentElement.style.setProperty('content',slider_data_ratio);
                var max_sum_plus=Number(slider_data_max)+Number(slider_data_min);
                var max_sum_minus=Number(slider_data_max)-Number(slider_data_min);
                var plus_num=0;
                var animation_frame_1 = 0;
                var animation_frame_2 = 600;
                var resize_time = 600;
                var resize_timer = null;
                //------------------------------------------------------/
                //-----작동 script 시작----------------------------------
                vanila_slider_status.innerHTML=pattern_sep+'<br>'+(((slider_bar_per/slider_data_max).toFixed(4))*100)+'%'; // 최초 페이지 진입 시 현재 슬라이더 위치에 기반하여 금액 표시.
                if(slider_point_split==undefined){
                    point_split_zero = 0;
                }else{
                    point_split_zero = slider_point_split.length;
                    split_zero_cal = point_split_zero+3;
                }
                function default_data(){ // 최초 페이지 진입시 슬라이더 동작 함수.
                    slider_status_width=Number(vanila_slider_status.clientWidth/2);
                    slider_bar_width=vanila_slider_bar.clientWidth;
                    slider_data_default=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_bar_halfButton;
                    slider_data_default_status=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_status_width;
                    return_cal = pattern_sep.toString().replace(/,/g, "");
                    slider_icon_point=slider_data_default;
                    percent_price = return_cal/slider_data_max;
                    
                    slider_data_per=((max_sum_minus)*slider_pointer_per)+Number(slider_data_min);
                    var sep_first_per=slider_data_cal.toString().substring(0,1);
                    var sep_bar_per=slider_data_per.toString().slice(minus_data_cal,slider_data_max.length);

                    slider_bar_button.style.left=slider_data_default+'px';
                    vanila_slider_status.style.left=slider_data_default_status+'px';
                    vanila_slider_over.style.width=slider_data_default+slider_bar_button.clientWidth+'px';

                    // console.log('sep_first_per = '+sep_first_per);
                    if(sep_bar_per!==0){
                        // console.log('.wrapper_slider_'+i+' line-0 : '+sep_bar_per+' / minus_data_cal = '+minus_data_cal+' / slider_data_cal = '+slider_data_cal);
                        slider_data_per=(slider_data_per-(Number(slider_data_per)%Number(slider_data_cal)));
                    };
                    if(slider_data_per>slider_data_max){
                        slider_data_per=slider_data_max;
                    };
                    if(slider_data_per<0){
                        slider_data_per=slider_data_min;
                    };
                    pattern_sep=slider_data_per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
                    vanila_slider_status.innerHTML=pattern_sep+'<br>'+(Number(percent_price.toFixed(split_zero_cal))*100)+'%';
                    // console.log('.wrapper_slider_'+i+' => 1 = '+((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)+' / .wrapper_slider_'+i+' => 2 = '+slider_status_width+' / .wrapper_slider_'+i+' => vanila_slider_status = '+Number(vanila_slider_status.clientWidth/2));
                    old_point=Number(slider_bar_button.style.left.split('px')[0]);
                    default_width=slider_bar_width;
                    return false;
                };

                function vanila_slider_move(){ // 슬라이더 무브 먼트 전체.
                    function animate_frame(){ // 현재 미사용 - 보강 후 jQuery의 animate 기능 완성.
                        for(i=0;i<slider_data_default;i++){
                            animate_box = setTimeout(function(){
                                plus_num++
                                animation_frame_1=plus_num*100;
                                slider_bar_button.style.left=plus_num+'px';
                                vanila_slider_over.style.width=plus_num+'px';
                                // console.log(plus_num);
                            },animation_frame_1);
                        }
                    };

                    function slider_math(){ // 슬라이더 동작에 필요한 기본 계산 함수.
                        slider_bar_width=vanila_slider_bar.clientWidth;
                        slider_status_width=Number(vanila_slider_status.clientWidth/2);
                        slider_bar_start=(window.innerWidth-slider_bar_width)/2;
                        slider_icon_point=slide_icon_pageX-slider_bar_start;
                        slider_icon_move=Number(slider_bar_button.style.left.split('px')[0])+slider_bar_halfButton;

                        slider_bar_per=(Math.floor((slider_data_cal)*Math.floor((max_sum_minus/slider_data_cal)*(slider_icon_point/slider_bar_width))))+Number(slider_data_min);
                        slider_data_default=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_bar_halfButton;
                        slider_data_default_status=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_status_width;
                        slider_pointer_per=(slider_data_default+slider_bar_halfButton)/slider_bar_width;
                        // slider_data_per=(slider_data_max*slider_pointer_per); //기본 단위 맞춤 없이 사용할 경우 주석 해제 후 밑에 있는 같은 이름 변수를 주석처리 할 것.
                        slider_data_ratio=Math.floor((slider_data_max)*(slider_bar_per/Number(slider_data_cal)));

                        var sep_bar_per = slider_bar_per.toString().slice(minus_data_cal,slider_data_max.length);
                        slider_data_per=(slider_data_per-(Number(slider_data_per)%Number(slider_data_cal))); //기본 단위 밑으로 계산되어 나오는 숫자를 기본 단위에 맞춤.
                        percent_price = return_cal/slider_data_max; // 전체 최대 비용값 대비 현재 버튼의 가격의 % 정도 출력.
                        // -- 퍼센트 출력부의 소수점이 버튼 조작시 최대/최소 범위를 넘지 않도록 범위지정.
                        if(percent_price>1){
                            percent_price = 1;
                        }
                        else if(percent_price<0){
                            percent_price = 0;
                        }
                        //  -----------------------------------------------------------------
                        console.log('slider_bar_per = '+slider_bar_per+' / data_cal_cut = '+data_cal_cut+' / percent_price = '+percent_price);
                        return false;
                    };
                    function sep_bar_auto(){ // 기본 동작 범위 안에서 동작에 사용되는 마지막 수식 공통 함수(최소 단위 밑의 자릿수가 있을 경우 반올림)->slider_math에 기능이 합쳐져 사용 안함.
                        var sep_bar_per = slider_bar_per.toString().slice(minus_data_cal,slider_data_max.length);
                        if(sep_bar_per!==0){
                            // console.log('.wrapper_slider_'+i+' move-line-0 : '+sep_bar_per);
                            if(((sep_bar_per)>=(slider_data_cal/2))){
                                slider_bar_per=(slider_bar_per-sep_bar_per)+Number(slider_data_cal);
                                // console.log('.wrapper_slider_'+i+' move-line-1-1 : '+sep_bar_per);
                            }else{
                                slider_bar_per=(slider_bar_per-sep_bar_per)+0;
                                // console.log('.wrapper_slider_'+i+' move-line-1-2 : '+sep_bar_per);
                            }
                        };
                        return false;
                    };
                    function slider_move(){ // 실질적 동작에 사용되는 공통 함수.
                        trans_per=slider_icon_point;
                        trans_val_button=trans_per-slider_bar_halfButton+'px';
                        trans_val_status=trans_per-slider_status_width+'px';
                        trans_val_over=trans_per+slider_bar_halfButton+'px';

                        slider_bar_button.style.left=trans_val_button;
                        vanila_slider_status.style.left=trans_val_status;
                        vanila_slider_over.style.width=trans_val_over;

                        pattern_sep=slider_bar_per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
                        
                        var num_per_price = Number(percent_price.toFixed(split_zero_cal))*100;                        
                        var price_split_length;
                        // -- 소수 유무 검사 후 해당 소수점 자리 자동 설정.
                        if(String(data_cal_cut).split('.').length>1){
                            price_split_length = String(data_cal_cut).split('.')[1].length;
                        }else{
                            price_split_length = 0;
                        }
                        // ------------------------------------------
                        vanila_slider_status.innerHTML=pattern_sep+'<br>'+num_per_price.toFixed(price_split_length)+'%';
                        clone_sep=pattern_sep;

                        cal_pattern = pattern_sep.split(',').length;
                        console.log('cal_pattern = '+cal_pattern);

                        return_cal = pattern_sep.toString().replace(/,/g, "");
                        console.log('return_cal = '+ return_cal + ' / percent_price = '+percent_price);
                        console.log(' === price_split_length = '+price_split_length);

                        input_point=slider_data_reset;
                        trans_val_button=slider_icon_point-slider_bar_halfButton+'px';
                        trans_val_status=slider_icon_point-slider_status_width+'px';
                        trans_val_over=slider_icon_point+slider_bar_halfButton+'px';

                        // if((re_val_button!==null)||(re_val_button!==undefined)){
                        //     // slider_bar_button.style.left=re_val_button;
                        //     // vanila_slider_status.style.left=re_val_status;
                        //     // vanila_slider_over.style.width=re_val_over;

                        //     slider_bar_button.style.left=trans_val_button;
                        //     vanila_slider_status.style.left=trans_val_status;
                        //     vanila_slider_over.style.width=trans_val_over;

                        //     console.log('ch1 = '+trans_val_button+' / '+trans_val_status+' / '+trans_val_over);
                        // }else{
                        //     // slider_bar_button.style.left=trans_val_button;
                        //     // vanila_slider_status.style.left=trans_val_status;
                        //     // vanila_slider_over.style.width=trans_val_over;

                        //     slider_bar_button.style.left=0;
                        //     vanila_slider_status.style.left=0;
                        //     vanila_slider_over.style.width=0;

                        //     console.log('ch2 = '+re_val_button+' / '+re_val_status+' / '+re_val_over);
                        // }

                        new_point=Number(slider_bar_button.style.left.split('px')[0]);
                        console.log('evn - percent_price = '+percent_price+' / trans_val_button = '+trans_val_button+' / trans_val_status = '+trans_val_status+' / trans_val_over = '+trans_val_over+ ' / percent_price.toFixed(point_split_zero) = '+percent_price.toFixed(point_split_zero));
                    };

                    function vanila_mouseClick(event){ // 마우스 클릭 시 적용되는 동작 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        event.preventDefault();
                        event.stopPropagation();
                        slide_icon_pageX=event.pageX;
                        slider_math();
                        mousedown_start=false;
                        vanila_slider_over.classList.add('click-transition');
                        slider_bar_button.classList.add('click-transition');
                        // console.log('slider_bar_per = '+(slider_data_cal*slider_icon_point)/slider_bar_width);
                        if(slider_icon_point>slider_bar_width-(slider_bar_halfButton/4)){
                            if(slider_bar_per>slider_data_max){
                                slider_bar_per=slider_data_max;
                            };
                            slider_icon_point=slider_bar_width-(slider_bar_halfButton/4);
                            slider_move();
                        }else if(slider_icon_point-(slider_bar_halfButton/4)<0){
                            if(slider_bar_per<slider_data_min){
                                slider_bar_per=slider_data_min;
                            };
                            slider_icon_point=0+(slider_bar_halfButton/4);
                            slider_move();
                            // console.log(vanila_slider_over.clientWidth);
                        }else{
                            // sep_bar_auto();
                            slider_move();
                            // console.log(vanila_slider_over.clientWidth);
                        };
                        // input_point=trans_val_button;
                        // new_point=Number(slider_bar_button.style.left.split('px')[0]);
                        // console.log('///--slider_data_default='+slider_data_default+' / slider_data_reset='+slider_data_reset);
                        return false;
                    };
                    function mouse_func(){ // 마우스 오버, 다운, 업 시 적용되는 동작 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        event.preventDefault();
                        event.stopPropagation();
                        slide_icon_pageX=event.pageX;
                        slider_math();
                        vanila_slider_over.classList.remove('click-transition');
                        slider_bar_button.classList.remove('click-transition');
                        // console.log('slider_bar_per = '+Math.floor((slider_data_cal*slider_icon_point)/(slider_bar_width)));
                        // console.log('slider_icon_point = '+slider_icon_point+' / slider_icon_move = '+slider_icon_move+' / slider_bar_width = '+slider_bar_width+' / per = '+((slider_data_max/slider_data_cal)*(slider_icon_point/slider_bar_width)));
                        if((slider_icon_point>slider_bar_width-(slider_bar_halfButton/4))&&(mousedown_start==true)){
                            if(slider_bar_per>slider_data_max){
                                slider_bar_per=slider_data_max;
                            };
                            slider_icon_point=slider_bar_width-(slider_bar_halfButton/4);
                            slider_move();
                        }else if((slider_icon_point-(slider_bar_halfButton/4)<0)&&(mousedown_start==true)){
                            if(slider_bar_per<slider_data_min){
                                slider_bar_per=slider_data_min;
                            };
                            slider_icon_point=0+(slider_bar_halfButton/4);
                            slider_move();
                        }else{
                            if(mousedown_start==true){
                                // sep_bar_auto();
                                slider_move();
                                // console.log(vanila_slider_over.clientWidth);
                            }
                        };
                        // input_point=trans_val_button;
                        // new_point=Number(slider_bar_button.style.left.split('px')[0]);
                        // console.log('///--slider_data_default='+slider_data_default+' / slider_data_reset='+slider_data_reset);
                        return false;
                    };
                    function touch_func(){ // 터치 스타트, 무브, 앤드, 캔슬 시 적용되는 동작 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        event.preventDefault();
                        event.stopPropagation();
                        slide_icon_pageX=event.changedTouches[0].pageX;
                        slider_math();
                        if(slider_icon_point>slider_bar_width-(slider_bar_halfButton/4)){
                            slider_bar_per=slider_data_max;
                            slider_icon_point=slider_bar_width-(slider_bar_halfButton/4);
                            slider_move();
                        }else if(slider_icon_point-(slider_bar_halfButton/4)<0){
                            slider_bar_per=slider_data_min;
                            slider_icon_point=0+(slider_bar_halfButton/4);
                            slider_move();
                            // console.log(slider_icon_point);
                        }else{
                            // sep_bar_auto();
                            slider_move();
                            // console.log(slider_icon_point);
                        };
                        // input_point=trans_val_button;
                        // new_point=Number(slider_bar_button.style.left.split('px')[0]);
                        // console.log('///--slider_data_default='+slider_data_default+' / slider_data_reset='+slider_data_reset);
                        return false;
                    };

                    function vanila_mouseOut(event){ // 마우스 아웃 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        // event.preventDefault();
                        // event.stopPropagation();
                        mousedown_start=false;
                        console.log(mousedown_start);
                    };
                    function vanila_mouseDown(event){ // 마우스 다운 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        // event.preventDefault();
                        // event.stopPropagation();
                        slider_bar_width=vanila_slider_bar.clientWidth;
                        slide_icon_pageX=event.pageX;
                        mousedown_start=true;
                    };
                    function vanila_mouseMove(event){ // 마우스 무브 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        mouse_func();
                    };
                    function vanila_mouseUp(event){ // 마우스 업 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        mousedown_start=false;
                        mouse_func();
                    };

                    function vanila_touchStart(event){ // 터치 스타트 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        // event.preventDefault();
                        // event.stopPropagation();
                        slider_bar_width=vanila_slider_bar.clientWidth;
                        slide_icon_pageX=event.touches[0].pageX;
                    };

                    function vanila_touchMove(event){ // 터치 무브 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        vanila_slider_over.classList.remove('click-transition');
                        slider_bar_button.classList.remove('click-transition');
                        touch_func();
                    };

                    function vanila_touchEnd(event){ // 터치 앤드 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        vanila_slider_over.classList.add('click-transition');
                        slider_bar_button.classList.add('click-transition');
                        touch_func();
                    };

                    function vanila_touchCancle(event){ // 터치 캔슬 시 이밴트 실행시 적용되는 함수(최소/최대 범위 도달 시 동작 및 정상 범위 내에서의 동작 방식).
                        vanila_slider_over.classList.add('click-transition');
                        slider_bar_button.classList.add('click-transition');
                        touch_func();
                    };
                    //--동작 이밴트 적용 부분-- 각 이밴트 함수 내부에 resize 시 조건을 내장시키는 방향으로 코드 수정할 것.
                    vanila_slider_bar.addEventListener('click',vanila_mouseClick,false);
                    vanila_slider_bar.addEventListener('mousedown',vanila_mouseDown,false);
                    vanila_slider_bar.addEventListener('mousemove',vanila_mouseMove,false);
                    vanila_slider_bar.addEventListener('mouseup',vanila_mouseUp,false);
                    vanila_slider_bar.addEventListener('mouseout',vanila_mouseOut,false);
                    vanila_slider_bar.addEventListener('touchstart',vanila_touchStart,false);
                    vanila_slider_bar.addEventListener('touchmove',vanila_touchMove,false);
                    vanila_slider_bar.addEventListener('touchend',vanila_touchEnd,false);
                    vanila_slider_bar.addEventListener('touchcancle',vanila_touchCancle,false);
                    //----------------------
                };

                function Option_min_max(){ // 최소, 최대 수 표기하는 span 생성자.
                    var create_slider_cal=document.createElement('span');
                    var slider_cal_pre=wrapper_slider.prepend(create_slider_cal);
                    var slider_cal=document.querySelector('.wrapper_slider_'+i+' span');
                    var wrap_slider_path=wrapper_slider.append(wrapper_slider_create);
                    wrapper_slider_create.innerHTML+='<span class="slider_min">'+slider_data_min.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",")+'</span><span class="slider_max">'+slider_data_max.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",")+'</span>';
                    slider_cal.classList.add('slider_cal');
                    slider_cal.innerHTML='단위 : '+slider_data_cal.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
                };

                default_data();
                Option_min_max();
                vanila_slider_move();

                function resize_data_zero(){ // resize 시 동작 함수.
                    new_width=vanila_slider_bar.clientWidth;
                    slider_status_width=Number(vanila_slider_status.clientWidth/2);
                    // slider_data_default=((vanila_slider_bar.getAttribute('data-default')/100)*new_width)-slider_bar_halfButton;
                    // slider_data_default_status=((vanila_slider_bar.getAttribute('data-default')/100)*new_width)-slider_status_width;
                    slider_icon_move=Number(slider_bar_button.style.left.split('px')[0])+slider_bar_halfButton;
                    slider_icon_point=slider_icon_move;
                    slider_bar_per=(Math.floor((slider_data_cal)*Math.floor((max_sum_minus/slider_data_cal)*(slider_icon_point/new_width))))+Number(slider_data_min);

                    // console.log('???resize_data - slider_bar_width = '+slider_bar_width+' / slider_icon_point = '+slider_icon_point+' / slider_bar_per = '+slider_bar_per);

                    slider_data_per=(slider_data_per-(Number(slider_data_per)%Number(slider_data_cal)));
                    var sep_first_per=slider_data_cal.toString().substring(0,1);
                    var sep_bar_per=slider_data_per.toString().slice(minus_data_cal,slider_data_max.length);

                    if(slider_icon_point>new_width-(slider_bar_halfButton/4)){
                        slider_bar_per=slider_data_max;
                        slider_icon_point=new_width-(slider_bar_halfButton/4);
                        reset_move();
                    }else if(slider_icon_point-(slider_bar_halfButton/4)<0){
                        slider_bar_per=slider_data_min;
                        slider_icon_point=0+(slider_bar_halfButton/4);
                        reset_move();
                        // console.log(slider_icon_point);
                    }else{
                        // sep_bar_auto();
                        reset_move();
                        // console.log(slider_icon_point);
                    };

                    function reset_move(){
                        re_val_button=slider_icon_point-slider_bar_halfButton+'px';
                        re_val_status=slider_icon_point-slider_status_width+'px';
                        re_val_over=slider_icon_point+slider_bar_halfButton+'px';

                        slider_bar_button.style.left=re_val_button;
                        vanila_slider_status.style.left=re_val_status;
                        vanila_slider_over.style.width=re_val_over;
                    };

                    // console.log('!!!resize_data - slider_bar_width = '+slider_bar_width+' / slider_icon_point = '+slider_icon_point+' / slider_bar_per = '+slider_bar_per);
                    if(sep_bar_per!==0){
                        // console.log('.wrapper_slider_'+i+' line-0 : '+sep_bar_per+' / minus_data_cal = '+minus_data_cal+' / slider_data_cal = '+slider_data_cal);
                        slider_data_per=(slider_data_per-(Number(slider_data_per)%Number(slider_data_cal)));
                    };
                    if(slider_data_per>slider_data_max){
                        slider_data_per=slider_data_max;
                    };
                    if(slider_data_per<0){
                        slider_data_per=slider_data_min;
                    };
                    pattern_sep=slider_data_per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
                    vanila_slider_status.innerHTML=pattern_sep+'<br>'+(Number(percent_price.toFixed(point_split_zero))*100)+'%';
                    // console.log('.wrapper_slider_'+i+' => 1 = '+((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)+' / .wrapper_slider_'+i+' => 2 = '+slider_status_width+' / .wrapper_slider_'+i+' => vanila_slider_status = '+Number(vanila_slider_status.clientWidth/2));
                    return false;
                };

                function resize_data(){
                    new_width=vanila_slider_bar.clientWidth-6;
                    slider_status_width=Number(vanila_slider_status.clientWidth/4);
                    slider_bar_width=vanila_slider_bar.clientWidth;
                    slider_data_default_status=slider_icon_point;
                    slider_data_reset;
                    reisze_check=false;
                    slider_data_per=((max_sum_minus)*slider_pointer_per)+Number(slider_data_min);
                    trans_per=Math.floor(new_point*(new_width/old_width));
                    var sep_first_per=slider_data_cal.toString().substring(0,1);
                    var sep_bar_per=slider_data_per.toString().slice(minus_data_cal,slider_data_max.length);
                    slider_data_reset='';
                    console.log('<--new_width='+new_width);
                    if((new_point==undefined)||(new_point==null)){
                        if((default_width!==old_width)){
                            // slider_data_reset=old_point;
                            slider_data_reset = (Number(percent_price.toFixed(split_zero_cal)) * new_width)-(slider_bar_halfButton/2);
                            // console.log('m---old_width/old_point---');
                        }else{
                            if(new_width>old_width){
                                slider_data_reset=Math.floor(old_point*(new_width/old_width))+(slider_bar_halfButton/2);
                                // console.log('m---new_width_1/old_point---'+slider_data_reset);
                            }else{
                                slider_data_reset=Math.floor(old_point*(new_width/old_width));
                                // console.log('m---new_width_2/old_point---'+slider_data_reset);
                            }
                        };
                        reisze_check=true;
                    }else{
                        if((default_width!==old_width)){
                            if(new_width!==old_width){
                                slider_data_reset = (Number(percent_price.toFixed(split_zero_cal)) * new_width)-(slider_bar_halfButton/2);
                                console.log('1-1. new_width!==old_width = ' + slider_data_reset+' / percent_price.toFixed(point_split_zero) = '+percent_price.toFixed(point_split_zero)+' / slider_data_per = '+slider_data_per+' / slider_data_per = '+slider_data_per);
                            }else{
                                slider_data_reset = (Number(percent_price.toFixed(split_zero_cal)) * old_width)-(slider_bar_halfButton/2);
                                console.log('1-2. new_width==old_width = ' + slider_data_reset+' / percent_price.toFixed(point_split_zero) = '+percent_price.toFixed(point_split_zero)+' / slider_data_per = '+slider_data_per+' / slider_data_per = '+slider_data_per);
                            }
                            console.log('1. default_width!==old_width = ' + slider_data_reset+' / percent_price.toFixed(point_split_zero) = '+percent_price.toFixed(point_split_zero)+' / slider_data_per = '+slider_data_per+' / slider_data_per = '+slider_data_per);
                            // if(new_point!==old_point){//알맞은 조건 찾을 것 - resize 후 거기서 이밴트 발생 시 다시 resize 시 값 고정되며 멈춤.                                
                                //=== 근사치의 동작을 보여주던 마지막 조건식 - 2번 이상 사이즈 변화시 위치 지정에 문제가 생김. ===//
                                // if(slider_data_reset==new_point){
                                    // slider_data_reset=new_point;
                                // }else{
                                    // if(new_width>old_width){ //---바의 길이에서 기준을 삼는 것이 아니라, 금액의 비율값으로 기준 삼아 수정필요. 혹은 start,old,new로 세분화 할 것.---.
                                        // if(new_point!==old_point){
                                            // slider_data_reset=new_point;
                                            // console.log('--- old_pointC = '+old_point+' / new_point = '+new_point);
                                        // }else{
                                            // slider_data_reset=trans_per+(slider_bar_halfButton/2);
                                            // console.log('--- old_pointD = '+old_point+' / new_point = '+new_point);
                                        // }
                                        // console.log('--- old_point1 = '+old_point+' / new_point = '+new_point);
                                        // console.log('m---new_width_1/new_point---'+(new_width/old_width));
                                    // }else{
                                        // if(new_point!==old_point){
                                            // slider_data_reset=new_point;
                                            // console.log('--- old_pointA = '+old_point+' / new_point = '+new_point);
                                        // }else{
                                            // slider_data_reset=new_point;
                                            // slider_data_reset=Math.floor(new_point*(new_width/old_width))+(slider_bar_halfButton/2);
                                            // console.log('--- old_pointB = '+old_point+' / new_point = '+new_point);
                                        // }
                                        // console.log('--- old_point1 = '+old_point+' / new_point = '+new_point);
                                        // console.log('m---new_width_2/new_point---'+(new_width/old_width));
                                    // };
                                // }

                                // new_point=old_point;
                                // console.log('--- old_point3 = '+old_point+' / new_point = '+new_point);
                                // console.log('m---old_width/new_point--->'+slider_data_reset);
                            // }else{
                                // slider_data_reset=old_point;
                                // if(new_point!==old_point){
                                    // slider_data_reset=new_point;
                                    // console.log('--- old_pointD = '+old_point+' / new_point = '+new_point);
                                // }else{
                                    // slider_data_reset=Math.floor(old_point*(new_width/old_width));
                                    // console.log('--- old_pointF = '+old_point+' / new_point = '+new_point);
                                // }
                                // console.log('--- old_point2 = '+old_point+' / new_point = '+new_point);
                                // console.log('m---old_width/old_point--->'+slider_data_reset);
                            // };
                        }else{
                            if(new_width!==old_width){
                                console.log('2-1. new_width!==old_width = ' + slider_data_reset);
                                slider_data_reset = (Number(percent_price.toFixed(split_zero_cal)) * new_width)-(slider_bar_halfButton);
                            }else{
                                slider_data_reset = (Number(percent_price.toFixed(split_zero_cal)) * old_width)-(slider_bar_halfButton);
                            }
                            console.log('2-2. new_width==old_width = ' + slider_data_reset);
                            // if(new_width>old_width){
                                // slider_data_reset=trans_per+(slider_bar_halfButton/2);
                                // console.log('--- old_point3 = '+old_point+' / new_point = '+new_point);
                                // console.log('m---new_width_1/new_point---'+(new_width/old_width));
                            // }else{
                                // slider_data_reset=trans_per;
                                // console.log('--- old_point4 = '+old_point+' / new_point = '+new_point);
                                // console.log('m---new_width_2/new_point---'+(new_width/old_width));
                            // };
                        };
                        reisze_check=true;
                    }
                    /*
                    if(slider_data_reset>slider_bar_width-(slider_bar_halfButton/4)){
                        slider_bar_per=slider_data_max;
                        slider_data_reset=slider_bar_width-(slider_bar_halfButton/4);
                        reset_move();
                    }else if(slider_data_reset-(slider_bar_halfButton/4)<0){
                        slider_bar_per=slider_data_min;
                        slider_data_reset=0+(slider_bar_halfButton/4);
                        reset_move();
                        // console.log(slider_data_reset);
                    }else{
                        // sep_bar_auto();
                        reset_move();
                        // console.log(slider_data_reset);
                    };
                    */
                    reset_move();
                    function reset_move(){
                        
                        re_val_button=slider_data_reset+'px';
                        re_val_status=slider_data_reset-slider_status_width+'px';
                        re_val_over=slider_data_reset+slider_bar_halfButton+'px';

                        slider_bar_button.style.left=re_val_button;
                        vanila_slider_status.style.left=re_val_status;
                        vanila_slider_over.style.width=re_val_over;

                        console.log('resize - re_val_button = '+re_val_button+' / re_val_status = '+re_val_status+' / re_val_over = '+re_val_over+' / slider_data_reset = '+slider_data_reset);
                    };

                    // console.log('sep_first_per = '+sep_first_per);
                    if(sep_bar_per!==0){
                        // console.log('.wrapper_slider_'+i+' line-0 : '+sep_bar_per+' / minus_data_cal = '+minus_data_cal+' / slider_data_cal = '+slider_data_cal);
                        slider_data_per=(slider_data_per-(Number(slider_data_per)%Number(slider_data_cal)));
                    };
                    if(slider_data_per>slider_data_max){
                        slider_data_per=slider_data_max;
                    };
                    if(slider_data_per<0){
                        slider_data_per=slider_data_min;
                    };
                    // console.log('!!!resize_data - slider_bar_width = '+slider_bar_width+' / slider_icon_point = '+slider_icon_point+' / clone_sep = '+clone_sep);
                    pattern_sep=slider_data_per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
                    if((clone_sep==undefined)||(clone_sep==null)){
                        vanila_slider_status.innerHTML=pattern_sep+'<br>'+(Number(percent_price.toFixed(split_zero_cal))*100)+'%';
                    }else{
                        vanila_slider_status.innerHTML=pattern_sep+'<br>'+(Number(percent_price.toFixed(split_zero_cal))*100)+'%';
                    };
                    // console.log('???resize_data - slider_bar_width = '+slider_bar_width+' / slider_icon_point = '+slider_icon_point+' / new_point = '+new_point);
                };

                function resize_data_num(){
                    console.log('num_start.');
                    new_width=vanila_slider_bar.clientWidth;                    
                    slider_bar_width=vanila_slider_bar.clientWidth;
                    slider_status_width=Number(vanila_slider_status.clientWidth/2);
                    slider_bar_start=(window.innerWidth-slider_bar_width)/2;
                    slider_icon_point=slide_icon_pageX-slider_bar_start;
                    slider_icon_move=Number(slider_bar_button.style.left.split('px')[0])+slider_bar_halfButton;

                    slider_bar_per=(Math.floor((slider_data_cal)*Math.floor((max_sum_minus/slider_data_cal)*(slider_icon_point/slider_bar_width))))+Number(slider_data_min);
                    slider_data_default=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_bar_halfButton;
                    slider_data_default_status=((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-slider_status_width;
                    slider_pointer_per=(slider_data_default+slider_bar_halfButton)/slider_bar_width;
                    // slider_data_per=(slider_data_max*slider_pointer_per); //기본 단위 맞춤 없이 사용할 경우 주석 해제 후 밑에 있는 같은 이름 변수를 주석처리 할 것.
                    slider_data_ratio=Math.floor((slider_data_max)*(slider_bar_per/Number(slider_data_cal)));

                    // var sep_bar_per = slider_bar_per.toString().slice(minus_data_cal,slider_data_max.length);
                    // slider_data_per=(slider_data_per-(Number(slider_data_per)%Number(slider_data_cal))); //기본 단위 밑으로 계산되어 나오는 숫자를 기본 단위에 맞춤.

                    // slider_math();                    
                    reisze_check=true;                    
                    slider_data_reset = (Number(percent_price.toFixed(split_zero_cal)) * new_width)-(slider_bar_halfButton);
                    console.log('slider_data_per/slider_data_max = '+slider_data_per/slider_data_max);
                    reset_move();
                    function reset_move(){
                        slider_bar_button.style.left=slider_data_reset+'px';
                        vanila_slider_status.style.left=slider_data_reset-slider_status_width+'px';
                        vanila_slider_over.style.width=slider_data_reset+slider_bar_halfButton+'px';
                    };

                    // console.log('sep_first_per = '+sep_first_per);
                    // if(sep_bar_per!==0){
                    //     // console.log('.wrapper_slider_'+i+' line-0 : '+sep_bar_per+' / minus_data_cal = '+minus_data_cal+' / slider_data_cal = '+slider_data_cal);
                    //     slider_data_per=(slider_data_per-(Number(slider_data_per)%Number(slider_data_cal)));
                    // };
                    // if(slider_data_per>slider_data_max){
                    //     slider_data_per=slider_data_max;
                    // };
                    // if(slider_data_per<0){
                    //     slider_data_per=slider_data_min;
                    // };
                    // console.log('!!!resize_data - slider_bar_width = '+slider_bar_width+' / slider_icon_point = '+slider_icon_point+' / clone_sep = '+clone_sep);
                    pattern_sep=slider_data_per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
                    
                    if((clone_sep==undefined)||(clone_sep==null)){
                        vanila_slider_status.innerHTML=pattern_sep+'<br>'+(Number(percent_price.toFixed(split_zero_cal))*100)+'%';
                    }else{
                        vanila_slider_status.innerHTML=clone_sep+'<br>'+(Number(percent_price.toFixed(split_zero_cal))*100)+'%';
                    };                    
                    // console.log('???resize_data - slider_bar_width = '+slider_bar_width+' / slider_icon_point = '+slider_icon_point+' / new_point = '+new_point);                    
                }

                window.addEventListener('resize', function(){ // 화면 넓이 변경 시 거기에 맞추어 초기값 다시 세팅 실행.
                    old_width=slider_bar_width-6;
                    console.log('<--old_width='+old_width);
                    // old_point=input_point;
                    clearTimeout(resize_timer);
                    // console.log('<--new_point='+new_point);
                    resize_timer = setTimeout(function(){
                        // console.log('100 = '+((vanila_slider_bar.getAttribute('data-default')/100)*slider_bar_width)+' / 200 = '+Number(vanila_slider_status.clientWidth)+' / vanila_slider_status = '+Number(vanila_slider_status.clientWidth/2));
                        // default_data(); // 초기화 동작을 원할시 주석 제거 후 resize_data() 주석 처리.
                        resize_data(); // 기존 값을 유지하는 동작을 원할시 주석 제거 후 default_data() 주석 처리.
                        // resize_data_zero();
                    }, resize_time);
                    return false;
                });
            };
            return false;
        });
    </script>
</head>
<body>
    <div class="wrap-all">
        <h1 class="a-center">
            슬라이더 모듈 샘플
        </h1>
        <div class="wrapper_slider">
            <div class="vanila_slider_bar" data-min="50000" data-max="5000000" data-cal="10000" data-default="50">
            </div>
        </div>
        <div class="wrapper_slider">
            <div class="vanila_slider_bar" data-min="10000" data-max="1000000" data-cal="5000" data-default="50">
            </div>
        </div>
        <div class="wrapper_slider">
            <div class="vanila_slider_bar" data-min="5000" data-max="100000" data-cal="1000" data-default="50">
            </div>
        </div>
        <div class="wrapper_slider">
            <div class="vanila_slider_bar" data-min="100000" data-max="10000000" data-cal="50000" data-default="50">
            </div>
        </div>
        <div class="wrapper_slider">
            <div class="vanila_slider_bar" data-min="0" data-max="1000000" data-cal="10000" data-default="50">
            </div>
        </div>

    </div>
</body>
</html>